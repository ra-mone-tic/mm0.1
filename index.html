<!DOCTYPE html>
<html lang="ru" data-theme="minimal">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MeowTestüî® </title>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å—Ç–∏–ª–∏ MapLibre –∏ —Ç–µ–º—É -->
  <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet">
  <link href="assets/css/theme.css" rel="stylesheet">

  <style>
    html, body { height: 100%; }
    body {
      margin: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
      height: 100svh;
      height: 100dvh;
      background: var(--surface-0);
      color: var(--text-0);
      font-family: var(--font-ui);
    }
    #controls {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      padding: 12px;
      background: var(--surface-1);
      border-bottom: var(--border);
    }
    #layout { flex: 1; display: flex; }
    #map { flex: 1; width: 100%; height: 100%; }
    input[type="date"] { font-size: 16px; flex: 0 0 160px; }
    #logo { height: 40px; max-width: 100%; cursor: pointer; }
    #burger { cursor: pointer; font-size: 22px; color: var(--text-0); margin-left: auto; user-select: none; }
    #burger:focus-visible, #closeSidebar:focus-visible { outline: 3px solid color-mix(in srgb, var(--brand) 55%, transparent); outline-offset: 2px; }

    /* –°–∞–π–¥–±–∞—Ä —Å–æ —Å–ø–∏—Å–∫–æ–º —Å–æ–±—ã—Ç–∏–π */
    #sidebar {
      position: fixed;
      right: 0;
      top: 0;
      height: 100%;
      width: 320px;
      background: var(--surface-1);
      border-left: var(--border);
      box-shadow: var(--shadow-sm);
      padding: 12px;
      padding-bottom: 56px;
      font-size: 14px;
      overflow-y: auto;
      transform: translateX(100%);
      transition: transform .3s;
      z-index: 1200;
    }
    #sidebar.open { transform: translateX(0); }
    #sidebar .item {
      margin-bottom: 12px;
      cursor: pointer;
      padding: 8px;
      border-bottom: var(--border);
      border-radius: var(--radius-sm);
      transition: background var(--fx-fast), transform var(--fx-fast);
    }
    #sidebar .item:hover { background: var(--surface-2); }
    #sidebar .item.is-active { outline: 2px solid color-mix(in srgb, var(--brand) 55%, transparent); border-radius: var(--radius-sm); }
    #closeSidebar {
      cursor: pointer;
      font-size: 22px;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: var(--radius-xs);
      transition: background var(--fx-fast);
    }
    #closeSidebar:hover { background: var(--surface-2); }
    #closeSidebar:active { transform: translateY(1px); }

    :root { --search-panel-offset: 0px; }
    #bottomBar {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 900;
      background: var(--surface-1);
      border-top: var(--border);
      box-shadow: 0 -12px 30px rgba(15, 18, 36, 0.1);
      padding: 12px 16px calc(12px + env(safe-area-inset-bottom));
      display: flex;
      justify-content: center;
    }
    #bottomBar .bottom-bar__inner {
      width: min(680px, 100%);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .search-field {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--surface-0);
      border: var(--border);
      border-radius: var(--radius-md);
      padding: 10px 14px;
      box-shadow: var(--shadow-sm);
      transition: box-shadow var(--fx-fast), border-color var(--fx-fast);
    }
    .search-field:focus-within {
      box-shadow: var(--shadow-md);
      border-color: color-mix(in srgb, var(--brand) 55%, transparent);
    }
    .search-field__icon {
      color: var(--text-1);
      font-size: 18px;
      display: inline-flex;
    }
    #global-search {
      flex: 1;
      border: none;
      background: transparent;
      color: var(--text-0);
      font-size: 16px;
      font-family: inherit;
      min-width: 0;
    }
    #global-search::placeholder { color: var(--text-1); }
    #search-clear {
      border: none;
      background: transparent;
      color: var(--text-1);
      font-size: 20px;
      cursor: pointer;
      display: none;
      padding: 2px;
      line-height: 1;
    }
    #search-clear.is-visible { display: inline-flex; }

    #search-panel {
      position: fixed;
      left: 0;
      right: 0;
      bottom: var(--search-panel-offset);
      background: var(--surface-1);
      border-top: var(--border);
      box-shadow: 0 -18px 38px rgba(15, 18, 36, 0.18);
      border-top-left-radius: var(--radius-md);
      border-top-right-radius: var(--radius-md);
      padding: 12px 16px 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-height: min(70dvh, 520px);
      transform: translateY(110%);
      transition: transform var(--fx-slow);
      z-index: 950;
      touch-action: pan-y;
    }
    #search-panel.open { transform: translateY(0); }
    .search-panel__handle {
      width: 46px;
      height: 5px;
      border-radius: 999px;
      background: color-mix(in srgb, var(--text-1) 25%, transparent);
      align-self: center;
      cursor: grab;
    }
    .search-panel__label {
      margin: 4px 0 0;
      font-size: 0.8rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-1);
    }
    #search-results {
      margin: 0;
      padding: 0;
      list-style: none;
      overflow-y: auto;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    #search-results li {
      padding: 10px 12px;
      border-radius: var(--radius-sm);
      background: transparent;
      cursor: pointer;
      transition: background var(--fx-fast);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    #search-results li:hover { background: var(--surface-2); }
    #search-results li:focus-visible {
      outline: 3px solid color-mix(in srgb, var(--brand) 55%, transparent);
      outline-offset: 2px;
    }
    #search-results li strong { color: var(--text-0); font-size: 0.95rem; }
    #search-results li span { color: var(--text-1); font-size: 0.85rem; }
    .search-panel__empty {
      margin: 0;
      padding: 12px;
      text-align: center;
      color: var(--text-1);
      border-radius: var(--radius-sm);
      background: var(--surface-2);
    }

    @media (max-width: 768px) {
      #layout { flex-direction: column; }
      #logo { height: 28px; }
      #sidebar { width: 80%; max-width: 320px; }
      #bottomBar { padding: 10px 12px calc(10px + env(safe-area-inset-bottom)); }
      .search-field { padding: 8px 12px; }
      #global-search { font-size: 15px; }
    }
    .sidebar-footer {
      position: sticky;
      bottom: 0;
      background: var(--surface-1);
      padding: 8px;
      border-top: var(--border);
    }
  </style>
</head>
<body>
  <div id="controls">
    <label for="event-date"><span aria-hidden="true">üìÖ</span> –î–∞—Ç–∞:</label>
    <input type="date" id="event-date">
    <img id="logo" src="https://thumbs.dreamstime.com/b/cat-builder-holding-drill-white-background-cat-builder-drill-123551503.jpg" alt="Meow Records">
    <span id="burger" aria-label="–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π" role="button" tabindex="0">‚ò∞</span>
  </div>

  <div id="layout">
    <div id="map" role="application" aria-label="–ö–∞—Ä—Ç–∞ —Å–æ–±—ã—Ç–∏–π"></div>
  </div>

  <aside id="sidebar" aria-label="–°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <h3 style="margin:0;">–°–æ–±—ã—Ç–∏—è</h3>
      <span id="closeSidebar" aria-label="–ó–∞–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫" role="button" tabindex="0">√ó</span>
    </div>
    <hr>
    <div id="upcoming"></div>
    <div class="sidebar-footer">
      <button id="toggleArchive" class="btn" type="button">–ê—Ä—Ö–∏–≤</button>
    </div>
  </aside>

  <div id="bottomBar" role="search">
    <div class="bottom-bar__inner">
      <div class="search-field">
        <span class="search-field__icon" aria-hidden="true">üîç</span>
        <input type="search" id="global-search" placeholder="–ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π –∏ –º–µ—Å—Ç" autocomplete="off" enterkeyhint="search" aria-label="–ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π –∏ –º–µ—Å—Ç">
        <button type="button" id="search-clear" aria-label="–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫">√ó</button>
      </div>
    </div>
  </div>

  <section id="search-panel" aria-hidden="true" role="dialog" aria-label="–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞">
    <div class="search-panel__handle" aria-hidden="true"></div>
    <p id="search-label" class="search-panel__label">–ü–æ–¥—Å–∫–∞–∑–∫–∏</p>
    <ul id="search-results" role="listbox" aria-label="–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞"></ul>
    <p id="search-empty" class="search-panel__empty">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö‚Ä¶</p>
  </section>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script defer src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
  <script defer src="script.js"></script>
  <script defer src="assets/js/theme.js"></script>
</body>
</html>
