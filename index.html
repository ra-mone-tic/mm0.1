<!DOCTYPE html>
<html lang="ru" data-theme="minimal">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MeowTestüî® </title>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å—Ç–∏–ª–∏ MapLibre –∏ —Ç–µ–º—É -->
  <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet">
  <link href="assets/css/theme.css" rel="stylesheet">

  <style>
    html, body { height: 100%; }
    :root {
      --font-size-base: 16px;
      --font-size-large: calc(var(--font-size-base) * 1.1); /* +10% */
    }
    body {
      margin: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
      height: 100svh;
      height: 100dvh;
      background: var(--surface-0);
      color: var(--text-0);
      font-family: var(--font-ui);
      /* –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–æ–Ω—ã –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
      padding-top: env(safe-area-inset-top);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }
    #controls {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      padding: 12px;
      padding-top: calc(12px + env(safe-area-inset-top));
      padding-left: calc(12px + env(safe-area-inset-left));
      padding-right: calc(12px + env(safe-area-inset-right));
      background: var(--surface-1);
      border-bottom: var(--border);
      position: relative;
    }
    #layout { flex: 1; display: flex; }
    #map { flex: 1; width: 100%; height: 100%; }
    .date-input-container {
      display: flex;
      flex-direction: column;
      gap: 4px;
      flex: 0 0 160px;
    }

    .date-input-container label {
      font-size: 12px;
      color: var(--text-1);
      font-weight: 500;
      text-align: left;
      margin: 0;
      order: -1;
    }

    input[type="date"] {
      background:#d2cde7;
      color:var(--text-0);
      border:none;
      border-radius:9999px;
      padding:.5rem .75rem;
      accent-color: var(--brand);
      color-scheme: light;
      font-family:var(--font-ui);
      font-size:16px;
      cursor:pointer;
      transition: all var(--fx-fast);
      box-shadow: var(--shadow-sm);
      min-height:44px;
      min-width:160px;
      text-align: center;
      /* –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –±—Ä–∞—É–∑–µ—Ä–∞ */
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      outline: none;
    }
    input[type="date"]:hover {
      background: color-mix(in srgb, #d2cde7 90%, transparent);
    }
    input[type="date"]:focus {
      outline:3px solid color-mix(in srgb, var(--brand) 55%, transparent);
      outline-offset:2px;
      background: color-mix(in srgb, #d2cde7 90%, transparent);
    }
    /* –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–µ–ª–∫—É –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ Firefox */
    input[type="date"]::-webkit-calendar-picker-indicator {
      display: none;
    }
    input[type="date"]::-moz-focus-inner {
      border: 0;
      padding: 0;
    }
    #logo {
      height: 40px;
      max-width: 100%;
      cursor: pointer;
      min-height: 44px;
      display: flex;
      align-items: center;
      padding: 2px;
      border-radius: var(--radius-xs);
      transition: background var(--fx-fast);
    }
    #logo:hover { background: var(--surface-2); }
    #burger {
      cursor: pointer;
      font-size: 22px;
      color: var(--text-0);
      margin-left: auto;
      user-select: none;
      position: relative;
      z-index: 1300;
      background: var(--surface-1);
      padding: 8px;
      border-radius: var(--radius-xs);
      transition: background var(--fx-fast);
      min-height: 44px;
      min-width: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #burger:hover { background: var(--surface-2); }
    #burger:focus-visible { outline: 3px solid color-mix(in srgb, var(--brand) 55%, transparent); outline-offset: 2px; }

    /* –°–∞–π–¥–±–∞—Ä —Å–æ —Å–ø–∏—Å–∫–æ–º —Å–æ–±—ã—Ç–∏–π */
    #sidebar {
      position: fixed;
      right: 0;
      top: 10px;
      height: calc(100% - 95px);
      width: 320px;
      background: var(--surface-1);
      border-left: var(--border);
      border-top: var(--border);
      border-bottom: var(--border);
      border-top-left-radius: var(--radius-md);
      border-bottom-left-radius: var(--radius-md);
      box-shadow: var(--shadow-sm);
      padding: 12px;
      padding-bottom: 0;
      font-size: var(--font-size-base);
      overflow-y: auto;
      transform: translateX(100%);
      transition: transform .3s;
      z-index: 1200;
    }
    #sidebar.open { transform: translateX(0); }
    #sidebar .item {
      margin-bottom: 12px;
      cursor: pointer;
      padding: 8px;
      border-bottom: var(--border);
      border-radius: var(--radius-sm);
      transition: background var(--fx-fast), transform var(--fx-fast);
    }
    #sidebar .item:hover { background: var(--surface-2); }
    #sidebar .item.is-active { outline: 2px solid color-mix(in srgb, var(--brand) 55%, transparent); border-radius: var(--radius-sm); }
    #sidebar hr {
      margin-top: 50px;
      margin-bottom: 12px;
    }


    :root { --search-panel-offset: 0px; }
    #bottomBar {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 900;
      background: var(--surface-1);
      border-top: var(--border);
      box-shadow: 0 -12px 30px rgba(15, 18, 36, 0.1);
      padding: 12px 16px calc(12px + env(safe-area-inset-bottom));
      display: flex;
      justify-content: flex-start;
    }
    #bottomBar .bottom-bar__inner {
      width: min(680px, 100%);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .search-field {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--surface-0);
      border: var(--border);
      border-radius: var(--radius-md);
      padding: 10px 14px;
      box-shadow: var(--shadow-sm);
      transition: box-shadow var(--fx-fast), border-color var(--fx-fast);
    }
    .search-field:focus-within {
      box-shadow: var(--shadow-md);
      border-color: color-mix(in srgb, var(--brand) 55%, transparent);
    }
    .search-field__icon {
      color: var(--text-1);
      font-size: var(--font-size-large);
      display: inline-flex;
    }
    #global-search {
      flex: 1;
      border: none;
      background: transparent;
      color: var(--text-0);
      font-size: var(--font-size-base);
      font-family: inherit;
      min-width: 0;
      outline: none;
    }
    #global-search::placeholder { color: var(--text-1); }
    #search-clear {
      border: none;
      background: transparent;
      color: var(--text-1);
      font-size: var(--font-size-large);
      cursor: pointer;
      display: none;
      padding: 2px;
      line-height: 1;
    }
    #search-clear.is-visible { display: inline-flex; }

    #search-panel {
      position: fixed;
      left: 0;
      right: 0;
      bottom: var(--search-panel-offset);
      background: var(--surface-1);
      border-top: var(--border);
      box-shadow: 0 -18px 38px rgba(15, 18, 36, 0.18);
      border-top-left-radius: var(--radius-md);
      border-top-right-radius: var(--radius-md);
      padding: 12px 16px 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-height: min(70dvh, 520px);
      transform: translateY(calc(100% + 32px));
      opacity: 0;
      pointer-events: none;
      transition: transform var(--fx-slow), opacity var(--fx-fast);
      z-index: 950;
      touch-action: pan-y;
    }
    #search-panel.open {
      transform: translateY(0);
      opacity: 1;
      pointer-events: auto;
    }
    .search-panel__handle {
      width: 46px;
      height: 5px;
      border-radius: 999px;
      background: color-mix(in srgb, var(--text-1) 25%, transparent);
      align-self: center;
      cursor: grab;
    }
    .search-panel__label {
      margin: 4px 0 0;
      font-size: 0.8rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-1);
    }
    #search-results {
      margin: 0;
      padding: 0;
      list-style: none;
      overflow-y: auto;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    #search-results li {
      padding: 10px 12px;
      border-radius: var(--radius-sm);
      background: transparent;
      cursor: pointer;
      transition: background var(--fx-fast);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    #search-results li:hover { background: var(--surface-2); }
    #search-results li:focus-visible {
      outline: 3px solid color-mix(in srgb, var(--brand) 55%, transparent);
      outline-offset: 2px;
    }
    #search-results li strong { color: var(--text-0); font-size: calc(0.95rem * 1.1); }
    #search-results li span { color: var(--text-1); font-size: calc(0.85rem * 1.1); }
    .search-panel__empty {
      margin: 0;
      padding: 12px;
      text-align: center;
      color: var(--text-1);
      border-radius: var(--radius-sm);
      background: var(--surface-2);
    }

    /* –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    @media (max-width: 768px) {
      #layout { flex-direction: column; }
      #logo { height: 32px; min-height: 44px; min-width: 44px; }
      #sidebar { width: 80%; max-width: 320px; }
      #sidebar hr { margin-top: 45px; }
      #bottomBar { padding: 10px 12px calc(10px + env(safe-area-inset-bottom)); }
      .search-field { padding: 8px 12px; }
      #global-search { font-size: 15px; }
    }

    /* –ü–ª–∞–Ω—à–µ—Ç—ã –∏ –±–æ–ª—å—à–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã */
    @media (max-width: 640px) {
      #controls {
        gap: 6px;
        padding: 10px 8px;
      }
      #logo { height: 30px; }
      .date-input-container { flex: 0 0 140px; }
      input[type="date"] { font-size: 14px; }
      .date-input-container label { font-size: 11px; }
      #sidebar hr { margin-top: 40px; }
    }

    /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã */
    @media (max-width: 480px) {
      #controls {
        gap: 4px;
        padding: 8px 6px;
        flex-wrap: wrap;
      }
      #logo { height: 28px; }
      .date-input-container { flex: 0 0 120px; }
      input[type="date"] { font-size: 13px; }
      .date-input-container label { font-size: 10px; }
      #burger { font-size: 20px; padding: 6px; }
      #sidebar hr { margin-top: 35px; }
    }

    /* –£–∑–∫–∏–µ —ç–∫—Ä–∞–Ω—ã (iPhone SE, —Å—Ç–∞—Ä—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞) */
    @media (max-width: 375px) {
      #controls {
        gap: 2px;
        padding: 6px 4px;
        justify-content: space-between;
      }
      #logo { height: 24px; }
      .date-input-container { flex: 0 0 100px; }
      input[type="date"] { font-size: 12px; }
      .date-input-container label { font-size: 9px; }
      #burger { font-size: 18px; padding: 4px; }
      #sidebar hr { margin-top: 30px; }
    }

    /* –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ —É–∑–∫–∏–µ —ç–∫—Ä–∞–Ω—ã */
    @media (max-width: 320px) {
      #controls {
        flex-direction: column;
        align-items: stretch;
        gap: 4px;
      }
      #logo {
        height: 20px;
        align-self: center;
        order: -1;
      }
      .date-input-container {
        flex: 1;
        align-self: stretch;
      }
      input[type="date"] {
        font-size: 12px;
      }
      .date-input-container label {
        font-size: 9px;
      }
      #burger {
        align-self: flex-end;
        font-size: 16px;
        padding: 2px;
      }
      #sidebar hr { margin-top: 25px; }
    }
    /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞ —Ñ—É—Ç–µ—Ä–∞ —Å–∞–π–¥–±–∞—Ä–∞ –¥–ª—è –≤—Å–µ—Ö —Ç–µ–º */
    .sidebar-footer {
      position: sticky;
      bottom: 0;
      background: transparent !important;
      padding: 8px;
      text-align: right;
    }
    #copy-toast {
      position: fixed;
      left: 16px;
      bottom: calc(56px + 24px + env(safe-area-inset-bottom)); /* 24px ‚Äî –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø */
      transform: translate(0, 16px);
      background: var(--surface-1);
      border: var(--border);
      border-radius: var(--radius-sm);
      padding: 8px 14px;
      font-size: var(--font-size-base);
      color: var(--text-0);
      box-shadow: var(--shadow-md);
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--fx-fast), transform var(--fx-fast);
      z-index: 1300;
    }
    #copy-toast.is-visible {
      opacity: 1;
      transform: translate(0, 0);
    }
  </style>
</head>
<body>
  <div id="controls">
    <div class="date-input-container">
      <input type="date" id="event-date">
    </div>
    <img id="logo" src="https://thumbs.dreamstime.com/b/cat-builder-holding-drill-white-background-cat-builder-drill-123551503.jpg" alt="Meow Records">
    <span id="burger" aria-label="–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π" role="button" tabindex="0">‚ò∞</span>
  </div>

  <div id="layout">
    <div id="map" role="application" aria-label="–ö–∞—Ä—Ç–∞ —Å–æ–±—ã—Ç–∏–π"></div>
  </div>

  <aside id="sidebar" aria-label="–°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <h3 style="margin:0;">–°–æ–±—ã—Ç–∏—è</h3>
    </div>
    <hr>
    <div id="upcoming"></div>
    <div class="sidebar-footer">
      <button id="toggleArchive" class="btn" type="button">–ê—Ä—Ö–∏–≤</button>
    </div>
  </aside>

  <div id="bottomBar" role="search">
    <div class="bottom-bar__inner">
      <div class="search-field">
        <span class="search-field__icon" aria-hidden="true">üîç</span>
        <input type="search" id="global-search" placeholder="–ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π –∏ –º–µ—Å—Ç" autocomplete="off" enterkeyhint="search" aria-label="–ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π –∏ –º–µ—Å—Ç">
        <button type="button" id="search-clear" aria-label="–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫">√ó</button>
      </div>
    </div>
  </div>

  <section id="search-panel" aria-hidden="true" role="dialog" aria-label="–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞">
    <div class="search-panel__handle" aria-hidden="true"></div>
    <p id="search-label" class="search-panel__label">–ü–æ–¥—Å–∫–∞–∑–∫–∏</p>
    <ul id="search-results" role="listbox" aria-label="–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞"></ul>
    <p id="search-empty" class="search-panel__empty">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö‚Ä¶</p>
  </section>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script defer src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
  <script defer src="script.js"></script>
  <script defer src="assets/js/theme.js"></script>
  <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
  <div id="calendar-modal" class="calendar-modal" role="dialog" aria-modal="true" aria-labelledby="calendar-title" hidden>
    <div class="calendar-modal__backdrop" aria-hidden="true"></div>
    <div class="calendar-modal__content">
      <div class="calendar">
        <div class="calendar__header">
          <button id="calendar-prev" class="calendar__nav calendar__nav--prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü">‚Äπ</button>
          <div class="calendar__month-year"></div>
          <button id="calendar-next" class="calendar__nav calendar__nav--next" aria-label="–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü">‚Ä∫</button>
        </div>
        <div class="calendar__weekdays">
          <div class="calendar__weekday">–ü–Ω</div>
          <div class="calendar__weekday">–í—Ç</div>
          <div class="calendar__weekday">–°—Ä</div>
          <div class="calendar__weekday">–ß—Ç</div>
          <div class="calendar__weekday">–ü—Ç</div>
          <div class="calendar__weekday">–°–±</div>
          <div class="calendar__weekday">–í—Å</div>
        </div>
        <div class="calendar__days"></div>
      </div>
    </div>
  </div>

  <div id="copy-toast" role="status" aria-live="polite" hidden>–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞</div>

</body>
</html>
