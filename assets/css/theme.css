/* MeowMap Theme Tokens and Themes */

/* 1) Base tokens */
:root{
  --surface-0:#fff;        /* page background */
  --surface-1:#f7f7f9;     /* panels/cards */
  --surface-2:#eceef1;     /* hover/bg subtle */
  --text-0:#0f1222;        /* primary text */
  --text-1:#5c6370;        /* secondary */
  --brand:#2f7ef7;         /* brand/primary */
  --accent:#22b07d;        /* secondary accent */
  --danger:#e0565b; --warn:#f2b01d; --ok:#2db84d;
  --border:1px solid color-mix(in srgb, var(--text-1) 15%, transparent);
  --radius-xs:6px; --radius-sm:10px; --radius-md:16px; --radius-lg:22px;
  --shadow-sm:0 1px 2px rgba(0,0,0,.06);
  --shadow-md:0 6px 24px rgba(0,0,0,.10);
  --fx-fast:.15s; --fx-slow:.28s;
  --font-ui: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  --date-icon-filter:none; /* фильтр для иконки календаря */
}

/* 2) Baseline, buttons and focus rings (tokenized) */
html,body{height:100%;}
body{
  background:var(--surface-0); color:var(--text-0);
  font-family:var(--font-ui);
  transition: background var(--fx-slow), color var(--fx-slow);
}

.btn{
  display:inline-flex; align-items:center; gap:.5rem; padding:.5rem .9rem;
  border:var(--border); border-radius:var(--radius-sm);
  background:var(--surface-1); color:var(--text-0);
  cursor:pointer; user-select:none;
}
.btn-primary{ background:var(--brand); border-color:transparent; color:#fff; }
.btn-ghost{ background:transparent; border-color:transparent; }
.btn:hover{ filter:brightness(0.98); }
.btn:active{ transform:translateY(1px); }
.btn:focus-visible{ outline:3px solid color-mix(in srgb, var(--brand) 55%, transparent); outline-offset:2px; }

button, [role="button"], a, input, select, textarea{
  outline: none;
}
button:focus-visible, [role="button"]:focus-visible, a:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible{
  outline:3px solid color-mix(in srgb, var(--brand) 55%, transparent);
  outline-offset:2px;
}

/* Поля ввода даты — стили зависят от темы */
input[type="date"]{
  background:var(--surface-1);
  color:var(--text-0);
  border:var(--border);
  border-radius:var(--radius-sm);
  padding:.4rem .6rem;
  accent-color: var(--brand);
  color-scheme: light; /* светлый календарь по умолчанию */
}
input[type="date"]::-webkit-calendar-picker-indicator{
  filter:var(--date-icon-filter);
  opacity:.9;
}
/* Тёмные темы: тёмный системный календарь */
html[data-theme="neon"] input[type="date"],
html[data-theme="amoled"] input[type="date"]{
  color-scheme: dark;
}

/* 3) Leaflet + MapLibre UI from tokens (not touching tile styles) */
.leaflet-control-zoom a{
  background:var(--surface-1); color:var(--text-0); border:var(--border);
  width:38px; height:38px; line-height:38px; text-align:center;
  border-radius:var(--radius-sm); box-shadow:var(--shadow-sm);
}
.leaflet-control-zoom a:focus-visible{ outline:3px solid color-mix(in srgb, var(--brand) 55%, transparent); }
.leaflet-popup-content-wrapper{
  background:var(--surface-1); color:var(--text-0);
  border-radius:var(--radius-md); box-shadow:var(--shadow-md); border:var(--border);
}
.leaflet-popup-tip{ background:var(--surface-1); }
.leaflet-container .leaflet-popup-content{ line-height:1.5; }

/* MapLibre popups */
.maplibregl-popup-content{
  background:var(--surface-1); color:var(--text-0);
  border-radius:var(--radius-md); box-shadow:var(--shadow-md); border:var(--border);
}
.maplibregl-popup-tip{ border-top-color:var(--surface-1) !important; border-bottom-color:var(--surface-1) !important; }

/* 4) Scrollbar (webkit) */
*::-webkit-scrollbar{ width:10px; height:10px; }
*::-webkit-scrollbar-track{ background:var(--surface-2); }
*::-webkit-scrollbar-thumb{ background:color-mix(in srgb, var(--brand) 35%, transparent); border-radius:10px; }

/* 5) Themes (A–F) */
/* A) Minimal / Моно-минимал */
html[data-theme="minimal"]{
  --surface-0:#ffffff; --surface-1:#f8f9fb; --surface-2:#eef1f5;
  --text-0:#0f1222; --text-1:#6a7280;
  --brand:#2f7ef7; --accent:#22b07d;
  --radius-sm:8px; --radius-md:12px;
}

/* B) Modern Neutral / Современный нейтрал */
html[data-theme="modern"]{
  --surface-0:#fbfbfc; --surface-1:#ffffff; --surface-2:#eef0f3;
  --text-0:#121417; --text-1:#5c6570;
  --brand:#3b82f6; --accent:#8b5cf6; /* blue+violet duet */
  --radius-sm:10px; --radius-md:14px; --shadow-sm:0 2px 8px rgba(15,23,42,.06);
}

/* C) Neon Pulse / Молодёжный неон (glass) */
html[data-theme="neon"]{
  --surface-0:#0a0b0f; --surface-1:rgba(18,20,28,.68); --surface-2:rgba(36,40,58,.6);
  --text-0:#e9ecff; --text-1:#aab1c9;
  --brand:#22d3ee; --accent:#f472b6; /* cyan + pink */
  --border:1px solid rgba(255,255,255,.08);
  --shadow-md:0 20px 50px rgba(0,0,0,.45); --radius-md:16px;
  backdrop-filter: blur(10px);
}
html[data-theme="neon"]{ --date-icon-filter: invert(1) brightness(1.1); }
/* neon extras */
html[data-theme="neon"] .btn-primary{
  background:linear-gradient(135deg,var(--brand),var(--accent));
  border-color:transparent;
  box-shadow:0 0 0 1px rgba(255,255,255,.08) inset, 0 10px 30px rgba(0,0,0,.45);
}

/* D) Paper Map / Бумажная афиша */
html[data-theme="paper"]{
  --surface-0:#f7f3ee; --surface-1:#fffdfa; --surface-2:#efe8de;
  --text-0:#2a2420; --text-1:#6b5e54;
  --brand:#d26b2b; --accent:#2f7f66;
  --border:1px solid #e0d7cc; --radius-sm:6px; --shadow-sm:0 1px 0 rgba(0,0,0,.06);
}
html[data-theme="paper"] h1,html[data-theme="paper"] h2,html[data-theme="paper"] h3,html[data-theme="paper"] h4,html[data-theme="paper"] h5,html[data-theme="paper"] h6{
  font-family: Georgia, 'Times New Roman', serif;
}
html[data-theme="paper"] #sidebar .item{ border-bottom-style:dashed; }

/* E) AMOLED Night / Глубокий чёрный */
html[data-theme="amoled"]{
  --surface-0:#000; --surface-1:#0a0a0a; --surface-2:#121212;
  --text-0:#eaeaea; --text-1:#a1a1a1;
  --brand:#4dabf7; --accent:#7cddc3;
  --border:1px solid #1a1a1a; --shadow-md:none; /* pure black, no halos */
}
html[data-theme="amoled"]{ --date-icon-filter: invert(1) brightness(1.1); }

/* F) High Contrast / Доступность */
html[data-theme="a11y"]{
  --surface-0:#ffffff; --surface-1:#ffffff; --surface-2:#e5e5e5;
  --text-0:#000000; --text-1:#1a1a1a;
  --brand:#0039a6; --accent:#007f00; --danger:#9b0000;
  --border:2px solid #000; --radius-sm:4px;
  font-size:112%;
}


html[data-theme='modern'] #sidebar{ background: rgba(255,255,255,.85); backdrop-filter: saturate(1.2) blur(6px); }

