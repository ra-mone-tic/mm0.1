/* MeowMap Theme Tokens and Themes */

/* Font declarations */
@font-face {
  font-family: 'NTSomic';
  src: url('../fonts/Fonts/TTF/NTSomic-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
}
@font-face {
  font-family: 'NTSomic';
  src: url('../fonts/Fonts/TTF/NTSomic-Medium.ttf') format('truetype');
  font-weight: 500;
  font-style: normal;
}
@font-face {
  font-family: 'NTSomic';
  src: url('../fonts/Fonts/TTF/NTSomic-Bold.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
}

/* 1) Base tokens */
:root{
  --surface-0:#fff;        /* page background */
  --surface-1:#f7f7f9;     /* panels/cards */
  --surface-2:#eceef1;     /* hover/bg subtle */
  --text-0:#0f1222;        /* primary text */
  --text-1:#5c6370;        /* secondary */
  --brand:#2f7ef7;         /* brand/primary */
  --accent:#22b07d;        /* secondary accent */
  --danger:#e0565b; --warn:#f2b01d; --ok:#2db84d;
  --border:1px solid color-mix(in srgb, var(--text-1) 15%, transparent);
  --radius-xs:6px; --radius-sm:10px; --radius-md:16px; --radius-lg:22px;
  --shadow-sm:0 1px 2px rgba(0,0,0,.06);
  --shadow-md:0 6px 24px rgba(0,0,0,.10);
  --fx-fast:.15s; --fx-slow:.28s;
  --font-ui: 'NTSomic', Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  --date-icon-filter:none; /* фильтр для иконки календаря */
}

/* 2) Baseline, buttons and focus rings (tokenized) */
html,body{height:100%;}
body{
  background:var(--surface-0); color:var(--text-0);
  font-family:var(--font-ui);
  transition: background var(--fx-slow), color var(--fx-slow);
}

.btn{
  display:inline-flex; align-items:center; gap:.5rem; padding:.5rem .9rem;
  border:var(--border); border-radius:var(--radius-sm);
  background:var(--surface-1); color:var(--text-0);
  cursor:pointer; user-select:none;
}
.btn-primary{ background:var(--brand); border-color:transparent; color:#fff; }
.btn-ghost{ background:transparent; border-color:transparent; }
.btn:hover{ filter:brightness(0.98); }
.btn:active{ transform:translateY(1px); }
.btn:focus-visible{ outline:3px solid color-mix(in srgb, var(--brand) 55%, transparent); outline-offset:2px; }

button, [role="button"], a, input, select, textarea{
  outline: none;
}
button:focus-visible, [role="button"]:focus-visible, a:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible{
  outline:3px solid color-mix(in srgb, var(--brand) 55%, transparent);
  outline-offset:2px;
}

/* Поля ввода даты — стили зависят от темы */
input[type="date"]{
  background:var(--surface-1);
  color:var(--text-0);
  border:var(--border);
  border-radius:var(--radius-sm);
  padding:.4rem .6rem;
  accent-color: var(--brand);
  color-scheme: light; /* светлый календарь по умолчанию */
}
input[type="date"]::-webkit-calendar-picker-indicator{
  filter:var(--date-icon-filter);
  opacity:.9;
}
/* Тёмные темы: тёмный системный календарь */
html[data-theme="neon"] input[type="date"],
html[data-theme="amoled"] input[type="date"]{
  color-scheme: dark;
}

/* 3) MapLibre UI (controls + popups) */
.maplibregl-ctrl-group{
  border-radius:var(--radius-sm);
  overflow:hidden;
  box-shadow:var(--shadow-sm);
}
.maplibregl-ctrl button{
  background:var(--surface-1); color:var(--text-0); border:var(--border);
  width:38px; height:38px; line-height:38px; text-align:center;
}
.maplibregl-ctrl button:hover{ filter:brightness(0.96); }
.maplibregl-ctrl button:focus-visible{ outline:3px solid color-mix(in srgb, var(--brand) 55%, transparent); outline-offset:2px; }
.maplibregl-ctrl button:active{ transform:translateY(1px); }
.maplibregl-popup-content{
  background:var(--surface-1); color:var(--text-0);
  border-radius:var(--radius-md); box-shadow:var(--shadow-md); border:var(--border);
  font-family:var(--font-ui);
}
.maplibregl-popup-tip{
  border-top-color:transparent !important;
  border-bottom-color:transparent !important;
  border-left-color:transparent !important;
  border-right-color:transparent !important;
}
.maplibregl-popup-anchor-bottom .maplibregl-popup-tip,
.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip,
.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{
  border-top-color:var(--surface-1) !important;
  margin-top:-1px;
}
.maplibregl-popup-anchor-top .maplibregl-popup-tip,
.maplibregl-popup-anchor-top-left .maplibregl-popup-tip,
.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{
  border-bottom-color:var(--surface-1) !important;
  margin-bottom:-1px;
}
.maplibregl-popup-anchor-left .maplibregl-popup-tip{
  border-right-color:var(--surface-1) !important;
  margin-left:-1px;
}
.maplibregl-popup-anchor-right .maplibregl-popup-tip{
  border-left-color:var(--surface-1) !important;
  margin-right:-1px;
}
.popup-text-handle {
  width: 38px;
  height: 5px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--text-1) 25%, transparent);
  margin: 10px auto 0 auto;
  cursor: pointer;
  transition: background 0.15s;
  box-shadow: 0 1px 4px rgba(0,0,0,0.08);
}
.popup-text-handle:hover {
  background: var(--brand);
}
.popup-text-full {
  max-height: 160px;
  overflow: auto;
  word-break: break-word;
  overflow-wrap: break-word;
  word-wrap: break-word; /* fallback for old browsers */
}
.popup-text {
  word-break: break-word;
  overflow-wrap: break-word;
  word-wrap: break-word; /* fallback for old browsers */
}

/* 4) Scrollbar (webkit) */
*::-webkit-scrollbar{ width:10px; height:10px; }
*::-webkit-scrollbar-track{ background:var(--surface-2); }
*::-webkit-scrollbar-thumb{ background:color-mix(in srgb, var(--brand) 35%, transparent); border-radius:10px; }

/* 5) Themes */
/* A) Minimal / Моно-минимал */
html[data-theme="minimal"]{
  --surface-0:#ffffff; --surface-1:#d2cde77e; --surface-2:#eef1f5;
  --text-0:#0f1222; --text-1:#6a7280;
  --brand:#2f7ef7; --accent:#22b07d;
  --radius-sm:8px; --radius-md:12px;
  --shadow-md: 0 0 16px #22d3ee, 0 0 32px #f472b6;
}

/* B) Neon Pulse / Молодёжный неон (glass) */
html[data-theme="neon"]{
  --surface-0:#0a0b0f; --surface-1:rgba(18,20,28,.68); --surface-2:rgba(36,40,58,.6);
  --text-0:#e9ecff; --text-1:#aab1c9;
  --brand:#22d3ee; --accent:#f472b6; /* cyan + pink */
  --border:1px solid rgba(255,255,255,.08);
  --shadow-md:0 20px 50px rgba(0,0,0,.45); --radius-md:16px;
  backdrop-filter: blur(10px);
}
html[data-theme="neon"]{ --date-icon-filter: invert(1) brightness(1.1); }
/* neon extras */
html[data-theme="neon"] .btn-primary{
  background:linear-gradient(135deg,var(--brand),var(--accent));
  border-color:transparent;
  box-shadow:0 0 0 1px rgba(255,255,255,.08) inset, 0 10px 30px rgba(0,0,0,.45);
}
/* neon popup buttons */
html[data-theme="neon"] button.expand-btn,
html[data-theme="neon"] button.share-btn {
  background: #2B2A29 !important;
  color: var(--text-0) !important;
}
html[data-theme="neon"] button.expand-btn:hover,
html[data-theme="neon"] button.share-btn:hover {
  background: color-mix(in srgb, #2B2A29 85%, #0a0b0f) !important;
}


/* Стилей для неактуальных тем не осталось */

/* Непрозрачный футер сайдбара для тем minimal и neon */
html[data-theme="minimal"] .sidebar-footer {
  background: #f9c5ff; /* Непрозрачный вариант surface-1 для minimal */
}
html[data-theme="minimal"] .btn {
  background: #D2CDE7;
}
html[data-theme="neon"] .sidebar-footer {
  background: rgba(18,20,28,1); /* Непрозрачный вариант surface-1 для neon */
}
html[data-theme="neon"] .btn {
  background: rgba(18,20,28,1);
}
